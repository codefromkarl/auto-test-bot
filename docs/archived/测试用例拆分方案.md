# 测试用例拆分方案

## 问题分析

当前FC-NH系列测试用例存在以下问题：
1. **多个FC-NH编号合并在一个文件中**，不利于独立执行
2. **文件命名与内容不匹配**（如一个文件包含FC-NH-013至FC-NH-017）
3. **执行结果无法准确定位到具体功能点**
4. **不便于CI/CD中的单独执行和报告**

## 拆分原则

1. **一个FC-NH编号对应一个独立文件**
2. **文件命名严格遵循**：`naohai_FC_NH_XXX.yaml`
3. **每个文件只测试一个功能点**
4. **保持原有文件结构**（phases/steps）

## 具体拆分方案

### Step 1：剧本列表（FC-NH-002 ~ FC-NH-012）

| 当前文件 | 需要拆分成的文件 |
|---------|-----------------|
| `naohai_FC_NH_002_story_card_display_fixed.yaml` | 保持不变 |
| `naohai_FC_NH_003_story_card_menu_fixed.yaml` | 保持不变 |
| `naohai_FC_NH_012_create_story_complete_fixed.yaml` | 保持不变 |

### Step 2：分集、角色和场景（FC-NH-013 ~ FC-NH-025）

| 当前文件 | 需要拆分成的文件 |
|---------|-----------------|
| `naohai_FC_NH_013_episode_management_fixed.yaml` | 需要拆分为5个文件 |
| `naohai_FC_NH_018_character_management_fixed.yaml` | 需要拆分为4个文件 |
| `naohai_FC_NH_022_scene_management_fixed.yaml` | 需要拆分为4个文件 |

具体拆分：
- FC-NH-013: 新增分集入口
- FC-NH-014: 新增分集字段
- FC-NH-015: 新增分集提交
- FC-NH-016: 分集卡片菜单
- FC-NH-017: 分集统计弹窗

- FC-NH-018: 角色创建方式单选
- FC-NH-019: 角色模型选择
- FC-NH-020: 角色卡片展示
- FC-NH-021: 删除角色

- FC-NH-022: 场景创建方式单选
- FC-NH-023: 场景模型选择
- FC-NH-024: 场景卡片展示
- FC-NH-025: 删除场景

### Step 3：分镜管理（FC-NH-026 ~ FC-NH-036）

| 当前文件 | 需要拆分成的文件 |
|---------|-----------------|
| `naohai_FC_NH_026_storyboard_management_fixed.yaml` | 需要拆分为4个文件 |
| `naohai_FC_NH_030_ai_script_analysis_fixed.yaml` | 需要拆分为7个文件 |

具体拆分：
- FC-NH-026: 新增分镜
- FC-NH-027: 编辑分镜入口
- FC-NH-028: 编辑提示词入口
- FC-NH-029: 分镜删除入口

- FC-NH-030: 剧本输入
- FC-NH-031: 分析参数：目标时长
- FC-NH-032: 建议分镜数量
- FC-NH-033: 开始分析按钮
- FC-NH-034: 分析产出
- FC-NH-035: 提示词生成
- FC-NH-036: 提示词展示与编辑

### Step 4：分镜绑定（FC-NH-037 ~ FC-NH-038）

| 当前文件 | 需要拆分成的文件 |
|---------|-----------------|
| `naohai_FC_NH_037_character_scene_binding_fixed.yaml` | 需要拆分为2个文件 |

具体拆分：
- FC-NH-037: 绑定多个角色（≤3）
- FC-NH-038: 绑定1个场景

### Step 5：图片素材（FC-NH-039 ~ FC-NH-041）

| 当前文件 | 需要拆分成的文件 |
|---------|-----------------|
| `naohai_FC_NH_039_image_material_fixed.yaml` | 需要拆分为3个文件 |

具体拆分：
- FC-NH-039: 上传图片
- FC-NH-040: 融合生图
- FC-NH-041: 当前/历史 Tabs

### Step 6：视频创作（FC-NH-042 ~ FC-NH-050）

| 当前文件 | 需要拆分成的文件 |
|---------|-----------------|
| `naohai_FC_NH_042_video_creation_fixed.yaml` | 需要拆分为9个文件 |

具体拆分：
- FC-NH-042: 进入视频创作
- FC-NH-043: 制作模式
- FC-NH-044: 模型选择
- FC-NH-045: 视频名称
- FC-NH-046: 描述
- FC-NH-047: 分辨率
- FC-NH-048: 生成数量
- FC-NH-049: 选择视频片段
- FC-NH-050: 导出资源包

## 实施计划

### 阶段1：创建拆分脚本
创建自动化脚本，从现有文件中提取特定FC-NH编号的phase，生成独立文件

### 阶段2：批量拆分执行
按照上述拆分方案，逐个拆分文件

### 阶段3：验证和清理
1. 验证每个新文件只包含一个功能点
2. 删除旧的合并文件
3. 更新文档

## 预期结果

拆分后将有：
- **AT-NH系列**：13个（冒烟测试）
- **FC-NH系列**：49个（独立功能测试）
- **总计**：62个独立测试用例文件

## 优势

1. **独立执行**：每个功能点可单独运行
2. **精确定位**：失败时能快速定位到具体功能
3. **CI/CD友好**：支持并行执行和独立报告
4. **维护性强**：修改某个功能不影响其他文件