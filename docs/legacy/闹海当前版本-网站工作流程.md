# 闹海当前版本网站工作流程（基于功能清单）

更新时间：2025-12-15  
来源文件：`docs/闹海当前版本功能清单及流程xlsx.xlsx`（Sheet：`功能清单`）

## 0. 文档目的与受众

本文件将“功能清单”整理为**可执行的站点工作流程**，用于：

- 产品/设计：对齐当前版本的用户主路径与页面职责
- 测试/自动化：形成可验证的流程步骤与关键校验点
- 运营/交付：作为演示与验收的操作手册

说明（假设）：清单未包含“登录/权限/接口”细节，文档默认用户已完成登录且具备对应权限。

## 1. 术语

- **剧本**：一个项目的顶层实体，包含项目说明/大纲、画幅比例、封面、画风等。
- **分集/片段**：剧本下的章节/段落单元，用于组织分镜、素材与视频。
- **分镜**：视频的镜头单元，包含分镜脚本、提示词、关联角色/场景、素材与视频片段。
- **角色资产**：可在分镜中复用的角色资源（可生成/可上传），支持删除。
- **场景资产**：可在分镜中复用的场景资源（可生成/可上传），支持删除。
- **图片素材**：分镜使用的图像资源（上传/融合生图/管理）。
- **视频创作**：基于图片素材生成视频，管理生成的视频片段，并选择用于分镜。
- **项目级输出**：导出资源包等整项目输出能力。

## 2. 全流程总览（端到端主路径）

1. **剧本列表**：查看剧本卡片 → 新建剧本（基础信息 → 画风与预览 → 创建）
2. **新增分集 + 角色/场景**：创建分集 → 创建角色资产/场景资产（生成或上传）
3. **分镜管理（结构生成）**：新增分镜/编辑分镜 → AI 分析剧本生成分镜结构 → 生成/编辑提示词
4. **分镜绑定**：分镜行内绑定角色（≤3）与场景（1个）
5. **图片素材**：上传图片 / 融合生图 / 当前与历史管理
6. **视频创作与输出**：从分镜进入视频创作 → 配置参数生成视频 → 选择视频片段 → 项目级导出资源包

## 3. 详细流程（按“流程步骤”拆解）

### Step 1：剧本列表

**页面/模块**：剧本列表（入口页）  
**目标**：浏览已有剧本；创建新剧本以进入后续流程。

#### 1.1 剧本列表（入口页）

- 1.1.1 剧本卡片展示（封面/标题/关键数值徽章/进度信息位）
- 1.1.2 剧本卡片菜单操作：查看/项目说明/编辑(预留)/删除(二次确认)

**关键校验点（建议）**
- 卡片区域可见且至少展示：封面、标题、关键数值/进度信息位
- 卡片菜单可打开，并对“删除”给出二次确认

#### 1.2 新建剧本弹窗-基础信息

- 1.2.1 打开新建弹窗（+ 新建剧本）
- 1.2.2 填写剧本名称（输入框）
- 1.2.3 编写项目说明/大纲
- 1.2.4 上传封面（点击/拖拽上传、预览；限制png/jpg/webp≤10MB）
- 1.2.5 选择画幅比例（3:4/16:9/1:1等）
- 1.2.6 下一步进入画风与预览

**关键校验点（建议）**
- 上传封面校验：格式与大小（png/jpg/webp ≤ 10MB）
- “下一步”在必填项缺失时应禁用或给出提示

#### 1.3 新建剧本弹窗-画风与预览

- 1.3.1 选择画风（风格卡片列表）
- 1.3.2 预览效果区（预览卡片/推荐位）
- 1.3.3 提交创建（创建剧本）

**关键校验点（建议）**
- 可选择画风，且预览区随选择发生变化（或至少有明确占位/提示）
- 创建成功后能回到列表并出现新剧本卡片，或自动进入剧本详情/分集页（以实际实现为准）

---

### Step 2：新增分集 + 角色和场景

**页面/模块**：新增分集_角色和场景  
**目标**：在剧本下创建分集，并准备角色/场景资产供分镜绑定与生成使用。

#### 2.1 分集（片段）管理

- 2.1.1 新增分集入口（添加片段/新增片段按钮）
- 2.1.2 新增分集字段：分集名称 + 分集说明
- 2.1.3 新增分集提交（确认/保存）
- 2.1.4 分集卡片菜单：片段说明/统计数据/删除片段
- 2.1.5 分集统计弹窗：图片数量/视频数量/消耗积分

**关键校验点（建议）**
- 新增分集后，分集卡片出现在列表中
- “统计数据”弹窗可打开并显示：图片数量/视频数量/消耗积分
- 删除片段必须二次确认

#### 2.2 角色资产（角色卡片 + 生成/上传 + 详情）

- 2.2.1 角色创建：模型生成 vs 自己上传图片（单选）
- 2.2.2 角色模型选择
- 2.2.3 角色卡片（预生成/已出演）
- 2.2.4 删除角色（二次确认，删除后不可恢复）

**关键校验点（建议）**
- “创建方式”互斥（单选）
- 删除角色有不可恢复提示与二次确认

#### 2.3 场景资产（场景卡片 + 生成/上传）

- 2.3.1 场景创建方式：模型生成 vs 自己上传图片（单选）
- 2.3.2 场景模型选择
- 2.3.3 场景卡片展示（场景名称等信息位）
- 2.3.4 删除场景（二次确认，删除后不可恢复）

**关键校验点（建议）**
- “创建方式”互斥（单选）
- 删除场景有不可恢复提示与二次确认

---

### Step 3：分镜管理（列表/AI 分析/提示词）

**页面/模块**：分镜管理  
**目标**：建立分镜结构、生成分镜提示词，为后续绑定素材与视频打基础。

#### 3.1 分镜管理页-列表与基础操作

- 3.1.1 新增分镜（+ 新增分镜）
- 3.1.2 单条分镜编辑入口：编辑分镜（✎）
- 3.1.3 分镜提示词编辑入口：编辑提示词（✎）
- 3.1.4 分镜删除入口（🗑）

**关键校验点（建议）**
- 新增/编辑/删除均应对列表产生可见变化
- 删除分镜建议二次确认（清单未写明，若没有可作为风险点记录）

#### 3.2 AI分析剧本（从剧本生成分镜结构）

- 3.2.1 剧本输入：粘贴文本/导入文件
- 3.2.2 分析参数：选择目标时长（1/3/5/10/30分钟）
- 3.2.3 分析提示：建议分镜数量（随时长变化）
- 3.2.4 一键开始分析（开始分析按钮）
- 3.2.5 分析产出：段落拆分为分镜脚本，并抽取角色/场景

**关键校验点（建议）**
- 输入方式（粘贴/导入）至少一种可用；导入失败应提示原因
- 目标时长可选且影响“建议分镜数量”
- 分析完成后：分镜脚本列表出现，且角色/场景有抽取结果（以 UI 展示为准）

#### 3.3 编写/生成分镜提示词

- 3.3.1 提示词生成：基于分镜脚本拼装人物/动作/场景/风格/镜头等
- 3.3.2 提示词在列表列内展示，支持编辑入口（✎）

**关键校验点（建议）**
- 列表中能看到提示词（或占位/生成状态），并可进入编辑

---

### Step 4：分镜绑定（角色/场景）

**页面/模块**：分镜管理（行内展示）  
**目标**：将分镜与角色/场景资产关联，为素材生成与视频创作提供上下文。

#### 4.1 单条分镜绑定（行内展示）

- 4.1.1 分镜行内展示关联多个角色标签（≤3个角色）
- 4.1.2 分镜行内展示关联1个场景列

**关键校验点（建议）**
- 角色绑定上限为 3；超过时应阻止或提示
- 场景绑定为单选（1个）

---

### Step 5：图片素材

**页面/模块**：分镜管理（素材区/弹窗/侧栏，具体以实现为准）  
**目标**：为分镜准备图片素材（上传/融合生图），并可在当前与历史间管理。

#### 5.1 图片素材上传图片

- （清单未细化：需要补充“入口位置/支持格式/大小限制/上传成功后的展示形态”等）

#### 5.2 图片素材融合生图

- （清单未细化：需要补充“融合参数/生成触发方式/耗时与失败提示/结果落位”等）

#### 5.3 图片素材管理（当前/历史）

- 5.3.1 图片管理 Tabs：当前图片 / 历史图片

**关键校验点（建议）**
- Tabs 切换生效，且两类列表数据区分明确

---

### Step 6：视频创作与项目级输出

**页面/模块**：分镜管理 → 视频创作  
**目标**：从分镜进入视频创作，配置参数生成视频，并管理/选用视频片段；最后进行项目导出。

#### 6.1 从分镜进入视频创作

- （清单未细化：需要补充“入口按钮/跳转后默认选中哪条分镜/带参规则”等）

#### 6.2 图生视频参数配置（视频创作页）

- 6.2.1 制作模式：图生视频 / 首尾帧视频
- 6.2.2 模型选择
- 6.2.3 视频名称（输入框）
- 6.2.4 描述（图生视频描述）
- 6.2.5 选择分辨率（720P/1080P/2K/4K）
- 6.2.6 生成数量（1/2/4/8）

**关键校验点（建议）**
- 模式互斥选择；不同模式下必填项/可见项应一致或有明确差异
- 分辨率、生成数量为可枚举选项

#### 6.3 视频片段管理与选用

- 6.3.1 选择视频片段作为该分镜的视频（说明文案/入口）

**关键校验点（建议）**
- 生成完成后出现视频片段列表，并支持将某片段“设为/选用”为该分镜结果

#### 6.4 项目级输出

- 6.4.2 导出资源包（项目级）

**关键校验点（建议）**
- 导出资源包的入口可见；导出中/失败/完成应有明确反馈（下载成功、失败原因）

## 4. 测试/验收建议（最小闭环）

建议以如下最小闭环作为“可上线”的验收脚本（人工/自动化均适用）：

1. 进入剧本列表 → 新建剧本（填写基础信息、选择画风、创建成功）
2. 新增分集（填写名称/说明）→ 统计弹窗可打开
3. 创建角色资产与场景资产（至少各 1 个）
4. 分镜管理：新增 1 条分镜 → 编辑分镜脚本 → 生成/编辑提示词
5. 分镜绑定：绑定 ≤3 个角色 + 1 个场景
6. 视频创作：进入视频创作页 → 配置参数 → 生成 1 个视频片段 → 选用到分镜
7. 项目级输出：导出资源包（若权限/开关受控，可在验收环境开启）

## 5. 待补充信息清单（来自功能清单缺口）

以下功能点在清单中未给出足够细节，建议补齐后再做稳定自动化：

- Step 5 图片素材：上传入口/格式/大小/成功后展示与删除规则；融合生图的参数与结果落位
- Step 6 从分镜进入视频创作：入口、跳转带参规则、默认选中逻辑
- 关键权限/开关：哪些功能受权限或环境开关控制（例如导出资源包）

