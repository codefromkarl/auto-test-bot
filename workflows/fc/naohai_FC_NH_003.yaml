workflow:
  name: "naohai_FC_NH_003"
  description: "FC-NH-003: 剧本卡片菜单操作测试"

  phases:
    - name: "enter_story_list"
      description: "进入剧本列表页"
      steps:
        - action: "open_page"
          url: "${test.url}"
          timeout: ${test.timeout.page_load}

        - action: "wait_for"
          condition:
            selector: "body"
            visible: true
          timeout: ${test.timeout.element_load}

        - action: "assert_logged_in"

        - action: "click"
          selector: '.nav-routerTo-item:has-text("AI创作")'
          timeout: ${test.timeout.element_load}

        - action: "wait_for"
          condition:
            selector: "text=剧本列表"
            visible: true
          timeout: ${test.timeout.page_load}

    - name: "test_menu_operations"
      description: "测试剧本卡片菜单操作"
      steps:
        - action: "wait_for"
          condition:
            selector: "div.list-item:not(.add-item) .menu, div.list-item:not(.add-item) .more, div.list-item:not(.add-item) .ellipsis, div.list-item:not(.add-item) .dropdown"
            visible: true
          timeout: ${test.timeout.element_load}

        - action: "click"
          selector: "div.list-item:not(.add-item) .menu, div.list-item:not(.add-item) .more, div.list-item:not(.add-item) .ellipsis, div.list-item:not(.add-item) .dropdown"
          timeout: ${test.timeout.element_load}

        - action: "wait_for"
          condition:
            selector: ".dropdown-menu, .menu-list"
            visible: true
          timeout: ${test.timeout.element_load}

        - action: "wait_for"
          condition:
            selector: "text=查看"
            visible: true
          timeout: ${test.timeout.element_load}

        - action: "wait_for"
          condition:
            selector: "text=项目说明"
            visible: true
          timeout: ${test.timeout.element_load}

        - action: "wait_for"
          condition:
            selector: "text=编辑(预留)"
            visible: true
          timeout: ${test.timeout.element_load}

        - action: "wait_for"
          condition:
            selector: "text=删除"
            visible: true
          timeout: ${test.timeout.element_load}

        - action: "screenshot"
          name: "menu_options"
          save_path: "screenshots/naohai/fc_nh_003_menu_options.png"

        - action: "click"
          selector: ".menu-item:has-text('删除')"
          timeout: ${test.timeout.element_load}

        - action: "wait_for"
          condition:
            selector: ".modal:has-text('删除'), .dialog:has-text('删除')"
            visible: true
          timeout: ${test.timeout.element_load}

        - action: "wait_for"
          condition:
            selector: "text=不可恢复"
            visible: true
          timeout: ${test.timeout.element_load}

        - action: "wait_for"
          condition:
            selector: "text=确定"
            visible: true
          timeout: ${test.timeout.element_load}

        - action: "wait_for"
          condition:
            selector: "text=取消"
            visible: true
          timeout: ${test.timeout.element_load}

        - action: "screenshot"
          name: "delete_confirmation"
          save_path: "screenshots/naohai/fc_nh_003_delete_confirmation.png"

        - action: "click"
          selector: "text=取消"
          timeout: ${test.timeout.element_load}