# Auto Test Bot Configuration
# 测试机器人配置文件

test:
  # 测试目标网站
  url: "https://example.com"

  # 超时设置 (毫秒)
  timeout: 30000

  # 页面加载超时
  page_load_timeout: 60000

  # 元素等待超时
  element_timeout: 10000

  # DOM 选择器配置
  selectors:
    # 提示词输入框
    prompt_input:
      - "#prompt-input"
      - "textarea[placeholder*='提示词']"
      - ".prompt-textarea"

    # 生成图片按钮
    generate_image_button:
      - "#generate-image-btn"
      - "button[data-action='generate-image']"
      - ".generate-btn:contains('生成图片')"

    # 生成视频按钮
    generate_video_button:
      - "#generate-video-btn"
      - "button[data-action='generate-video']"
      - ".generate-btn:contains('生成视频')"

    # 图片结果区域
    image_result:
      - ".image-result"
      - ".generated-image"
      - "[data-result='image']"

    # 视频结果区域
    video_result:
      - ".video-result"
      - ".generated-video"
      - "[data-result='video']"

    # 加载状态指示器
    loading_indicator:
      - ".loading"
      - ".spinner"
      - "[data-loading='true']"

# 测试步骤配置
steps:
  # 是否执行网站访问测试
  open_site: true

  # 是否执行文生图测试
  generate_image: true

  # 是否执行图生视频测试
  generate_video: true

  # 测试提示词
  test_prompt: "一只可爱的猫咪在花园里玩耍"

# 重试配置
retry:
  # 最大重试次数
  max_attempts: 3

  # 重试间隔 (秒)
  delay: 5

  # 哪些步骤需要重试
  retry_steps:
    - "open_site"
    - "generate_image"
    - "generate_video"

# 浏览器配置
browser:
  # 浏览器类型: chromium, firefox, webkit
  type: "chromium"

  # 是否无头模式
  headless: true

  # 浏览器窗口大小
  viewport:
    width: 1920
    height: 1080

  # 用户代理
  user_agent: "AutoTestBot/1.0 (Playwright)"

  # 忽略 HTTPS 错误
  ignore_https_errors: true

# 日志配置
logging:
  # 日志级别: DEBUG, INFO, WARNING, ERROR, CRITICAL
  level: "INFO"

  # 日志格式
  format: "%(asctime)s - %(name)s - %(levelname)s - %(message)s"

  # 日志文件路径
  file_path: "logs/test_bot.log"

  # 日志文件最大大小 (MB)
  max_file_size: 10

  # 保留的日志文件数量
  backup_count: 5

  # 是否输出到控制台
  console_output: true

# MCP 集成配置
mcp:
  # 是否启用 MCP
  enabled: true

  # 监控级别: basic, detailed, full
  monitoring_level: "detailed"

  # 控制台监控
  console:
    enabled: true
    capture_logs: true
    capture_warnings: true
    capture_errors: true

  # 网络监控
  network:
    enabled: true
    capture_requests: true
    capture_responses: true
    capture_headers: true
    capture_body: false  # 注意：捕获 body 会增加开销

  # 性能监控
  performance:
    enabled: true
    trace_duration: 30000  # 30秒

  # DOM 监控
  dom:
    enabled: true
    capture_snapshots: true
    snapshot_on_error: true

# 报告配置
reporting:
  # 报告输出目录
  output_dir: "reports"

  # 报告格式: json, html, both
  format: "both"

  # 是否包含截图
  include_screenshots: true

  # 是否包含 MCP trace 数据
  include_mcp_data: true

  # 报告保留天数
  retention_days: 30

# 截图配置
screenshots:
  # 是否启用截图
  enabled: true

  # 截图格式: png, jpeg
  format: "png"

  # 截图质量 (jpeg only)
  quality: 80

  # 截图时机
  capture_on:
    - "step_start"
    - "step_success"
    - "step_failure"
    - "test_complete"

  # 截图保存路径
  save_path: "screenshots"

# 通知配置 (可选)
notifications:
  # 是否启用通知
  enabled: false

  # 通知方式: email, webhook, slack
  method: "webhook"

  # 通知条件
  notify_on:
    - "test_failure"
    - "api_errors"
    - "performance_degradation"